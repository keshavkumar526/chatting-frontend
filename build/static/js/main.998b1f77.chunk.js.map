{"version":3,"sources":["components/Home.js","isAuth.js","context/index.js","components/Register.js","context/searchItem.js","components/RegisterAdmin.js","components/Navigator.js","components/Login.js","components/Messages.js","components/Conversation.js","components/Others.js","components/Friends.js","components/Chatting.js","components/Logout.js","components/Error.js","App.js","reportWebVitals.js","serviceWorker.js","index.js"],"names":["Home","Auth","isAuthenticated","authenticate","this","signOut","getAuth","initialState","email","sessionStorage","getItem","username","type","Context","createContext","rootReducer","state","action","user","payload","Provider","children","useReducer","dispatch","axios","create","baseURL","process","useEffect","a","get","withCredentials","response","data","setItem","JSON","stringify","status","res","console","log","removeItem","getData","value","Register","useState","name","setName","setEmail","password","setPassword","errMess","setErrMess","axiosInstance","useContext","history","useHistory","formSubmit","e","preventDefault","registerData","post","window","location","replace","push","className","onSubmit","style","marginRight","onChange","target","placeholder","href","searchedItem","SearchContext","SearchProvider","search","searchDispatch","RegisterAdmin","props","register","message","toggleModal","Modal","show","isOpen","onHide","animation","Header","Title","Body","Footer","Button","variant","onClick","Navigator","toggle","setToggle","searchData","setSearchData","changeInput","Navbar","zIndex","position","height","bg","expand","Container","Brand","src","width","alt","Toggle","aria-controls","Collapse","id","Nav","Link","NavDropdown","title","Item","Divider","aria-label","float","paddingRight","Login","login","htmlFor","Messages","index","conversation","Card","senderEmail","text","marginLeft","Text","format","createdAt","color","Conversation","setMessageByConversation","clicked","active","friendData","setFriendData","activeStatus","setActiveStatus","sendConversation","setSendConversation","friendCollId","friendCollectionId","members","find","friendEmail","some","u","userEmail","getUser","_id","newMessage","lastMessage","cursor","Others","setColor","sendRequest","receiverEmail","background","onMouseOver","onMouseLeave","Friends","setMessageByFriend","setUser","i","getDataByFriendId","Chatting","scroll","setScroll","conversations","setConversations","messageConversation","setMessageConversation","messageFriend","setMessageFriend","messageData","setMessageData","inputData","setInputData","arrivalMessage","setArrivalMessage","activeUsers","setActiveUsers","socket","useRef","sendMessage","messageForm","conversationId","friendId","prev","current","emit","friend","scrollIntoView","behavior","seen","delivered","io","on","Date","now","getConversations","users","parse","isMounted","sendSeen","c","sendDelivered","forEach","getConversation","MessageConversation","MessageFriend","Dialog","map","item","searchItem","friends","others","m","ref","el","Logout","Dashboard","App","exact","path","Error","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","origin","addEventListener","fetch","headers","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.998b1f77.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\n\r\nconst Home = () => {\r\n\r\n\r\n    return (\r\n      <div>\r\n        Home Page\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Home","const Auth = {\r\n  isAuthenticated: false,\r\n  authenticate() {\r\n    this.isAuthenticated = true;\r\n  },\r\n  signOut() {\r\n    this.isAuthenticated = false;\r\n  },\r\n  getAuth() {\r\n    return this.isAuthenticated;\r\n  }\r\n};\r\nexport default Auth;","import axios from \"axios\";\r\nimport Auth from '../isAuth';\r\nimport { useReducer, createContext, useEffect } from \"react\";\r\n\r\n\r\n// initial State\r\nconst initialState = {\r\n    email: sessionStorage.getItem(\"user\")?.email || null,\r\n    username: sessionStorage.getItem(\"user\")?.username || null,\r\n    type: sessionStorage.getItem(\"user\")?.type || null\r\n}\r\n\r\n// create Context\r\nconst Context = createContext()\r\n\r\n// root reducer\r\nconst rootReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            const user = action.payload\r\n            return {\r\n                ...state, email: user.email, username: user.username, type: user.type\r\n            }\r\n        case \"LOGOUT\":\r\n            return {\r\n                ...state, email: false, username: false, type: false\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n// context Provider\r\nconst Provider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(rootReducer, initialState)\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n    useEffect(() => {\r\n        const getData = async () => {\r\n            try {\r\n                const response = await axios.get(process.env.REACT_APP_API_URL+\"/userData\", { withCredentials: true })\r\n                Auth.authenticate();\r\n                dispatch({\r\n                    type: \"LOGIN\",\r\n                    payload: response.data\r\n                })\r\n                sessionStorage.setItem('user', JSON.stringify(response.data));\r\n            } catch (error) {\r\n                if (error.response?.status === 403) {\r\n                    try {\r\n                        await axios.get(process.env.REACT_APP_API_URL+\"/refreshToken\", {withCredentials: true})\r\n                        Auth.authenticate();\r\n                        const res = await axios.get(process.env.REACT_APP_API_URL+\"/userData\", { withCredentials: true })\r\n                        console.log(\"login with RT\");\r\n                        dispatch({\r\n                            type: \"LOGIN\",\r\n                            payload: res.data\r\n                        })\r\n                        sessionStorage.setItem(\"user\", JSON.stringify(res.data))\r\n                    } catch (err) {\r\n                        Auth.signOut()\r\n                        sessionStorage.removeItem(\"user\")\r\n                        // window.location.replace(\"/logout\")\r\n                    }\r\n                } else {\r\n                    Auth.signOut()\r\n                    sessionStorage.removeItem(\"user\")\r\n                    // window.location.replace(\"/logout\")\r\n                }\r\n            }\r\n        }\r\n        getData()\r\n    }, []);\r\n\r\n    return (\r\n        <Context.Provider value={{ state, dispatch }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}\r\n\r\nexport { Context, Provider }","import React, { useState, useContext } from \"react\"\r\nimport axios from \"axios\"\r\nimport { Context } from '../context';\r\nimport { useHistory } from 'react-router-dom';\r\nimport './index.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\"\r\nimport Auth from \"../isAuth\";\r\n\r\n\r\nconst Register = () => {\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [errMess, setErrMess] = useState(\"\")\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n\r\n  const { state } = useContext(Context);\r\n  const { dispatch } = useContext(Context);\r\n\r\n\r\n  const history = useHistory()\r\n\r\n  const getName = (e) => {\r\n    setName(e.target.value)\r\n  }\r\n  const getEmail = (e) => {\r\n    setEmail(e.target.value)\r\n  }\r\n  const getPassword = (e) => {\r\n    setPassword(e.target.value)\r\n  }\r\n  const formSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const registerData = {\r\n      name,\r\n      email,\r\n      password,\r\n      type: \"normal\"\r\n    }\r\n    try {\r\n      const response = await axiosInstance.post('register', registerData,{\r\n        withCredentials: true\r\n      })\r\n      console.log(response.data);\r\n      await Auth.authenticate()\r\n      await window.sessionStorage.setItem(\"user\", JSON.stringify(response.data))\r\n      await dispatch({\r\n        type: \"LOGIN\",\r\n        payload: response.data\r\n      })\r\n      window.location.replace(\"/chatting\")\r\n      // history.push(\"/chatting\")\r\n    } catch (error) {\r\n      console.log(error.response?.data);\r\n      setErrMess(error.response?.data)\r\n    }\r\n  }\r\n  if (Auth.getAuth()) {\r\n    history.push(\"/chatting\")\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"outer\">\r\n      <form className=\"inner\" onSubmit={formSubmit}>\r\n        <h3>Register</h3>\r\n        <p style={{ marginRight: '30px' }}>{errMess}</p>\r\n        <div className=\"form-group\">\r\n          <label>Name</label>\r\n          <input type=\"text\" value={name} onChange={getName}\r\n            className=\"form-control\" placeholder=\"First name\" />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label>Email</label>\r\n          <input type=\"email\" value={email} onChange={getEmail}\r\n            className=\"form-control\" placeholder=\"Enter email\" />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label>Password</label>\r\n          <input type=\"password\" value={password} onChange={getPassword}\r\n            className=\"form-control\" placeholder=\"Enter password\" />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-dark btn-lg btn-block\">Register</button>\r\n        <p className=\"forgot-password text-right\">\r\n          Already registered <a href=\"/login\">log in?</a>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register\r\n","import { useReducer, createContext } from \"react\";\r\n\r\n\r\n// initial State\r\nconst initialState = {\r\n  searchedItem: null\r\n}\r\n\r\n// create Context\r\nconst SearchContext = createContext()\r\n\r\n// root reducer\r\nconst rootReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case \"Change\":\r\n            return {\r\n              searchedItem: action.payload\r\n            }\r\n        case \"Empty\":\r\n          return{\r\n            searchedItem: null\r\n          }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n// context Provider\r\nconst SearchProvider = ({ children }) => {\r\n    const [search, searchDispatch] = useReducer(rootReducer, initialState)\r\n\r\n    return (\r\n        <SearchContext.Provider value={{ search, searchDispatch }}>\r\n            {children}\r\n        </SearchContext.Provider>\r\n    )\r\n}\r\n\r\nexport { SearchContext, SearchProvider }","import React, { useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport './index.css';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\"\r\n\r\n\r\nconst RegisterAdmin = (props) => {\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [errMess, setErrMess] = useState(\"\")\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n  const getName = (e) => {\r\n    setName(e.target.value)\r\n  }\r\n  const getEmail = (e) => {\r\n    setEmail(e.target.value)\r\n  }\r\n  const getPassword = (e) => {\r\n    setPassword(e.target.value)\r\n  }\r\n  const formSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const registerData = {\r\n      name,\r\n      email,\r\n      password,\r\n      type: \"admin\"\r\n    }\r\n    try {\r\n      const response = await axiosInstance.post('register', registerData)\r\n      if (response.data.register === true) {\r\n        console.log(response.data.message);\r\n        props.toggleModal()\r\n      } else {\r\n        console.log(response.data.message);\r\n        setErrMess(response.data.message)\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Modal show={props.isOpen} onHide={props.toggleModal} animation={false}>\r\n        <form onSubmit={formSubmit}>\r\n          <Modal.Header>\r\n            <Modal.Title>Register New Admin</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <p style={{ marginRight: '30px' }}>{errMess}</p>\r\n            <div className=\"form-group\">\r\n              <label>Name</label>\r\n              <input type=\"text\" value={name} onChange={getName}\r\n                className=\"form-control\" placeholder=\"First name\" />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Email</label>\r\n              <input type=\"email\" value={email} onChange={getEmail}\r\n                className=\"form-control\" placeholder=\"Enter email\" />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Password</label>\r\n              <input type=\"password\" value={password} onChange={getPassword}\r\n                className=\"form-control\" placeholder=\"Enter password\" />\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={props.toggleModal}>\r\n              Close\r\n            </Button>\r\n            <Button type=\"submit\" variant=\"primary\">\r\n              Register New Admin\r\n            </Button>\r\n          </Modal.Footer>\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RegisterAdmin","import { useContext, useState } from \"react\"\r\nimport { Context } from '../context';\r\nimport { SearchContext } from '../context/searchItem';\r\nimport RegisterAdmin from './RegisterAdmin'\r\nimport { Nav, NavDropdown, Navbar, Container } from 'react-bootstrap';\r\nimport axios from \"axios\";\r\n\r\n\r\n\r\n\r\nconst Navigator = () => {\r\n  const { state } = useContext(Context)\r\n  const { searchDispatch } = useContext(SearchContext)\r\n  const [toggle, setToggle] = useState(false)\r\n  const [searchData, setSearchData] = useState(\"\")\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n  const changeInput = async (e) => {\r\n    setSearchData(e.target.value)\r\n    if (e.target.value === \"\") {\r\n      searchDispatch({\r\n        type: \"Empty\",\r\n      })\r\n    } else {\r\n      try {// we send our email because jwtData not contain email\r\n        const response = await axiosInstance.post(\"searchUsers\", { name: e.target.value, email: state.email }, { withCredentials: true })\r\n        searchDispatch({\r\n          type: \"Change\",\r\n          payload: response.data\r\n        })\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  const toggleModal = () => {\r\n    setToggle(!toggle);\r\n  }\r\n\r\n  useState(() => { }, [state])\r\n\r\n  return (\r\n    <Navbar style={{ zIndex: \"2\", position: \"sticky\", height: \"62px\" }} bg=\"light\" expand=\"lg\">\r\n      <Container>\r\n        <Navbar.Brand href=\"/\">\r\n          <img\r\n            src=\"https://www.logolynx.com/images/logolynx/21/214fba9d9e8566bf92d15c66bf919d16.png\"\r\n            width=\"30\"\r\n            height=\"30\"\r\n            style={{ \"marginRight\": \"10px\" }}\r\n            className=\"d-inline-block align-top\"\r\n            alt=\"React Bootstrap logo\"\r\n          />\r\n          Rahul Verma\r\n        </Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"me-auto\">\r\n            {(state.type === \"admin\") ? (\r\n              <Nav.Link\r\n                onClick={toggleModal} >\r\n                Register Admin\r\n              </Nav.Link>\r\n            ) : (\r\n              (state.type === \"normal\") ? (\r\n                <></>\r\n              ) : (\r\n                <>\r\n                  <Nav.Link href=\"/register\">Register</Nav.Link>\r\n                  <Nav.Link href=\"/login\">Login</Nav.Link>\r\n                </>\r\n              )\r\n            )}\r\n            <RegisterAdmin isOpen={toggle} toggleModal={toggleModal} />\r\n            <Nav.Link href=\"/chatting\">Chatting</Nav.Link>\r\n            <NavDropdown title=\"Dropdown\" id=\"basic-nav-dropdown\">\r\n\r\n              <NavDropdown.Item href=\"#action/3.2\">Another action</NavDropdown.Item>\r\n              <NavDropdown.Item href=\"#action/3.3\">Something</NavDropdown.Item>\r\n              <NavDropdown.Divider />\r\n              <NavDropdown.Item href=\"#action/3.4\">Separated link</NavDropdown.Item>\r\n            </NavDropdown>\r\n\r\n          </Nav>\r\n\r\n          {(state.email || state.username) && (\r\n            <>\r\n              <form className=\"d-flex\" onSubmit={(e) => e.preventDefault()}>\r\n                <input style={{ height: \"34px\" }} className=\"form-control me-2 mt-2\" value={searchData}\r\n                  type=\"search\" placeholder=\"Search\" aria-label=\"Search\" onChange={changeInput} />\r\n                {/* <button className=\"btn btn-outline-success\" type=\"submit\">Search</button> */}\r\n              </form>\r\n\r\n              <Nav>\r\n                <li style={{ float: \"left\", paddingRight: \"5px\" }}>\r\n                  <Nav.Link href=\"/logout\">Logout</Nav.Link>\r\n                </li>\r\n                <Nav.Link className=\"\">\r\n                  <li className=\"text-center\" >\r\n                    <span className=\"p-2 avatar avatar-32 rounded bg-danger\">{state.username}\r\n                    </span>\r\n                  </li>\r\n                </Nav.Link>\r\n              </Nav>\r\n            </>\r\n          )}\r\n\r\n        </Navbar.Collapse>\r\n      </Container >\r\n    </Navbar >\r\n  )\r\n}\r\n\r\nexport default Navigator\r\n","import { useContext, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { Context } from '../context';\r\nimport './index.css';\r\nimport Auth from '../isAuth';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\"\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [errMess, setErrMess] = useState(\"\")\r\n  const history = useHistory()\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n\r\n  const { dispatch } = useContext(Context);\r\n\r\n\r\n\r\n  const getEmail = (e) => {\r\n    setEmail(e.target.value)\r\n  }\r\n  const getPassword = (e) => {\r\n    setPassword(e.target.value)\r\n  }\r\n  const formSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const login = {\r\n      email,\r\n      password,\r\n    }\r\n    try {\r\n      \r\n      const response = await axiosInstance.post('login', login, {\r\n        withCredentials: true\r\n      })\r\n      // const user = JSON.stringify(response.data)\r\n      await Auth.authenticate()\r\n      await window.sessionStorage.setItem(\"user\", JSON.stringify(response.data))\r\n      await dispatch({\r\n        type: \"LOGIN\",\r\n        payload: response.data\r\n      })\r\n      window.location.replace(\"/chatting\")\r\n      // history.push(\"/chatting\")\r\n    } catch (error) {\r\n      setErrMess(error.response?.data)\r\n      console.log(error.response);\r\n    }\r\n  }\r\n  \r\n  if (Auth.getAuth()) {\r\n    history.push(\"/chatting\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"outer\">\r\n      <form className=\"inner\" onSubmit={formSubmit}>\r\n\r\n        <h3>Log in</h3>\r\n        <p style={{ marginRight: '30px' }}>{errMess}</p>\r\n        <div className=\"form-group\">\r\n          <label>Email</label>\r\n          <input type=\"email\" value={email} onChange={getEmail}\r\n            className=\"form-control\" placeholder=\"Enter email\" />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label>Password</label>\r\n          <input type=\"password\" value={password} onChange={getPassword}\r\n            className=\"form-control\" placeholder=\"Enter password\" />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <div className=\"custom-control custom-checkbox\">\r\n            <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck1\" />\r\n            <label className=\"custom-control-label\" htmlFor=\"customCheck1\">Remember me</label>\r\n          </div>\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-dark btn-lg btn-block\">Login</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import { useContext } from \"react\"\r\nimport { Context } from '../context';\r\nimport { Card } from \"react-bootstrap\";\r\nimport { format } from \"timeago.js\";\r\n\r\n\r\nconst Messages = ({ message, index, conversation }) => {\r\n\r\n\r\n  const { state } = useContext(Context)\r\n\r\n\r\n  const senderStyle = {\r\n    width: '20rem',\r\n    marginLeft: \"9rem\"\r\n  }\r\n  const receiverStyle = {\r\n    width: '20rem'\r\n  }\r\n\r\n  const showTicks = () => {\r\n    if (message.status === \"seen\") {\r\n      return <ion-icon style={{ color: \"red\" }} name=\"done-all\"></ion-icon>\r\n    } else if (message.status === \"delivered\") {\r\n      return <ion-icon name=\"done-all\"></ion-icon>\r\n    }else{\r\n      return <ion-icon name=\"checkmark\"></ion-icon>\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        bg={message.senderEmail === state.email ? \"light\" : \"primary\"}\r\n        key={index}\r\n        text={message.senderEmail === state.email ? \"dark\" : \"light\"}\r\n        style={message.senderEmail === state.email ? senderStyle : receiverStyle}\r\n        className=\"mt-4\"\r\n      >\r\n        <Card.Body>\r\n          <Card.Text>{message.message}</Card.Text>\r\n        </Card.Body>\r\n      </Card>\r\n      <div style={message.senderEmail === state.email ? { marginLeft: \"20rem\" } : {}}>\r\n        <small\r\n          className=\"text-muted\">\r\n          {format(message.createdAt)}\r\n        </small>\r\n        {message.senderEmail === state.email && showTicks()}\r\n      </div>\r\n      {/* <Card\r\n        bg=\"info\"\r\n        key=\"2\"\r\n        text=\"light\"\r\n        style={{ width: '20rem' }}\r\n        className=\"mb-4\"\r\n      >\r\n        <Card.Body>\r\n          <Card.Text>Light Card Title </Card.Text>\r\n        </Card.Body>\r\n      </Card> */}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Messages","import { useState, useContext, useEffect, } from \"react\"\r\nimport { Context } from '../context';\r\nimport { Card } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst Conversation = ({ conversation, index, setMessageByConversation, clicked, active }) => {\r\n\r\n  const styleObj = {\r\n    width: '29rem',\r\n    cursor: \"pointer\",\r\n\r\n  }\r\n\r\n  const { state } = useContext(Context)\r\n  const [friendData, setFriendData] = useState({})\r\n  const [activeStatus, setActiveStatus] = useState(false)\r\n  const [sendConversation, setSendConversation] = useState({})\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const friendCollId = {\r\n      friendCollectionId: conversation.friendCollectionId\r\n    }\r\n    const getUser = async () => {\r\n      const res = await axiosInstance.post(\"friendId\", friendCollId, { withCredentials: true })\r\n      const friendEmail = await res.data.members.find((e) => e !== state.email)\r\n      setActiveStatus(active.some(u => u.userEmail === friendEmail))\r\n      const response = await axiosInstance.post(\"emailData\", { email: friendEmail }, { withCredentials: true })\r\n      setFriendData(response.data)\r\n    }\r\n    getUser()\r\n  }, [conversation, state, active, axiosInstance])\r\n  useEffect(() => {\r\n    setSendConversation({\r\n      \"_id\": conversation._id,\r\n      \"friendCollectionId\": conversation.friendCollectionId,\r\n      \"newMessage\": conversation.newMessage,\r\n      \"lastMessage\": conversation.lastMessage,\r\n      \"active\": activeStatus\r\n    })\r\n  }, [conversation, activeStatus])\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        bg={clicked._id === conversation._id ? \"primary\" : \"light\"}\r\n        key={index}\r\n        text={clicked._id === conversation._id ? \"light\" : \"dark\"}\r\n        style={styleObj}\r\n        className=\"mb-4\"\r\n        onClick={(e) => { setMessageByConversation(sendConversation) }}\r\n      >\r\n        <Card.Body>\r\n          <Card.Title>{friendData.name}<small style={{ color: clicked._id === conversation._id ? \"white\" : \"green\", marginLeft: \"30%\" }}>\r\n            {activeStatus ? \"Active Now\" : \"\"}</small>\r\n            <div style={{ color: clicked._id === conversation._id ? \"white\" : \"blue\", marginLeft: \"40%\" }}>\r\n              {conversation.newMessage && conversation.senderEmail !== state.email && <ion-icon name=\"radio-button-off\"></ion-icon>}\r\n            </div>\r\n          </Card.Title>\r\n          <Card.Text>{friendData.email}</Card.Text>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Conversation","import { useState, useContext } from \"react\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport { Context } from '../context';\r\n\r\n\r\n\r\n\r\n\r\nconst Others = ({ data, index }) => {\r\n\r\n  const [color, setColor] = useState(\"light\")\r\n  const { state } = useContext(Context)\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n\r\n  const styleObj = {\r\n    width: '29rem',\r\n    cursor: \"pointer\",\r\n    \"&:hover\": {\r\n      background: \"blue\"\r\n    },\r\n  }\r\n\r\n  const changeBlue = (e) => {\r\n    setColor(\"primary\")\r\n  }\r\n  const changeLight = (e) => {\r\n    setColor(\"light\")\r\n  }\r\n\r\n  const sendRequest = async (e) => {\r\n    try {\r\n      const response = await axiosInstance.post(\"addFriend\",\r\n        { senderEmail: state.email, receiverEmail: data.email }, { withCredentials: true })\r\n      if(response.data === null){\r\n        console.log(\"you are already friends\")\r\n      }else{\r\n        console.log(\"Friend Added Successfully\")\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        bg={color}\r\n        key={index}\r\n        text=\"Light\"\r\n        style={styleObj}\r\n        className=\"mb-4\"\r\n        onMouseOver={changeBlue}\r\n        onMouseLeave={changeLight}\r\n        onClick={sendRequest}\r\n      >\r\n        <Card.Body>\r\n          <Card.Title>{data.name}</Card.Title>\r\n          <Card.Text>{data.email}</Card.Text>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Others","import { useState, useContext, useEffect } from \"react\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport { Context } from '../context';\r\n\r\n\r\n\r\n\r\nconst Friends = ({ data, index, setMessageByFriend, clicked }) => {\r\n\r\n  // const [color, setColor] = useState(\"light\")\r\n  const [user, setUser] = useState({})\r\n  const { state } = useContext(Context)\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n\r\n  const styleObj = {\r\n    width: '29rem',\r\n    cursor: \"pointer\",\r\n    \"&:hover\": {\r\n      background: \"blue\"\r\n    },\r\n  }\r\n\r\n  // const changeBlue = (e) => {\r\n    // setColor(\"primary\")\r\n  // }\r\n  // const changeLight = (e) => {\r\n    // setColor(\"light\")\r\n  // }\r\n\r\n  // const setMessage = async (e) => {\r\n  //   try {\r\n  //     const response = await axios.post(\"http://localhost:5000/friendEmail\",\r\n  //       { senderEmail: state.email, receiverEmail: user.email }, { withCredentials: true })\r\n  //       // console.log(response.data._id)\r\n  //     setMessageByFriend(response.data)\r\n  //   } catch (error) {\r\n  //     console.log(error.response.data)\r\n  //     console.log(error)\r\n  //   }\r\n\r\n  // }\r\n\r\n\r\n  useEffect(() => {\r\n    const getDataByFriendId = async () => {\r\n      const friendEmail = data.members.find((i) => { return (i !== state.email) })\r\n      // console.log(friendEmail)\r\n      try {\r\n        const response = await axiosInstance.post(\"emailData\",\r\n          { email: friendEmail }, { withCredentials: true })\r\n        setUser(response.data)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n    getDataByFriendId()\r\n  }, [data, state, axiosInstance])\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        bg={clicked === data? \"primary\": \"light\"}\r\n        key={index}\r\n        text={clicked === data? \"light\": \"dark\"}\r\n        style={styleObj}\r\n        className=\"mb-4\"\r\n        // onMouseOver={changeBlue}\r\n        // onMouseLeave={changeLight}\r\n        onClick={(e) => setMessageByFriend(data)}\r\n      >\r\n        <Card.Body>\r\n          <Card.Title>{user.name}</Card.Title>\r\n          <Card.Text>{user.email}</Card.Text>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Friends","import axios from \"axios\";\r\nimport { useState, useContext, useEffect, useRef } from \"react\"\r\nimport { Context } from '../context';\r\nimport \"./whatsapp.css\"\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Messages from \"./Messages\";\r\nimport Conversation from \"./Conversation\";\r\nimport Others from \"./Others\";\r\nimport Friends from \"./Friends\";\r\nimport { Modal } from \"react-bootstrap\";\r\nimport Auth from '../isAuth';\r\nimport { SearchContext } from '../context/searchItem';\r\nimport { io } from \"socket.io-client\"\r\n\r\n\r\n\r\nconst Chatting = () => {\r\n\r\n\r\n\tconst { state } = useContext(Context)\r\n\tconst [scroll, setScroll] = useState(\"\")\r\n\tconst [conversations, setConversations] = useState([])\r\n\tconst [messageConversation, setMessageConversation] = useState(false)\r\n\tconst [messageFriend, setMessageFriend] = useState(false)\r\n\tconst { search } = useContext(SearchContext)\r\n\tconst [messageData, setMessageData] = useState([])\r\n\tconst [inputData, setInputData] = useState(\"\")\r\n\tconst [arrivalMessage, setArrivalMessage] = useState(null)\r\n\tconst [activeUsers, setActiveUsers] = useState([])\r\n\tconst socket = useRef()\r\n\tconst axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL})\r\n\r\n\r\n\tconst changeInput = (e) => {\r\n\t\tsetInputData(e.target.value);\r\n\t}\r\n\r\n\r\n\r\n\r\n\tconst sendMessage = async (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst messageForm = {\r\n\t\t\tconversationId: messageConversation._id,\r\n\t\t\tfriendId: messageFriend._id,\r\n\t\t\tsenderEmail: state.email,\r\n\t\t\tmessage: inputData\r\n\t\t}\r\n\t\tconsole.log(messageForm)\r\n\t\ttry {\r\n\t\t\tconst response = await axiosInstance.post(\"messagePost\", messageForm, { withCredentials: true })\r\n\t\t\tconsole.log(\"Message send successfully\", response.data)\r\n\t\t\tsetInputData(\"\")\r\n\t\t\tsetMessageData(prev => [...prev, response.data])\r\n\t\t\tif (messageConversation) {\r\n\t\t\t\tconst res = await axiosInstance.post(\"friendId\", { friendCollectionId: messageConversation.friendCollectionId }, { withCredentials: true })\r\n\t\t\t\tconst receiverEmail = res.data.members.find((i) => { return (i !== state.email) })\r\n\t\t\t\tsocket.current.emit(\"sendMessage\", {\r\n\t\t\t\t\tfriend: false,\r\n\t\t\t\t\tconversationId: messageConversation._id,\r\n\t\t\t\t\tsenderEmail: state.email,\r\n\t\t\t\t\ttext: inputData,\r\n\t\t\t\t\treceiverEmail\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconst receiverEmail = messageFriend.members.find((i) => { return (i !== state.email) })\r\n\t\t\t\tsocket.current.emit(\"sendMessage\", {\r\n\t\t\t\t\tfriend: messageFriend,\r\n\t\t\t\t\tconversationId: response.data.conversationId,\r\n\t\t\t\t\tsenderEmail: state.email,\r\n\t\t\t\t\ttext: inputData,\r\n\t\t\t\t\treceiverEmail\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 403) {\r\n\t\t\t\tawait axiosInstance.get(\"refreshToken\", { withCredentials: true })\r\n\t\t\t}\r\n\t\t\tconsole.log(error, error.response?.data)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst scrollToBottom = () => {\r\n\t\t\tscroll.scrollIntoView({ behavior: \"smooth\" });\r\n\t\t}\r\n\t\tif (scroll !== \"\") {\r\n\t\t\tscrollToBottom()\r\n\t\t}\r\n\t}, [messageData, scroll])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst seen = async (id) => {\r\n\t\t\tawait axios.post(process.env.REACT_APP_API_URL+\"/seen\",\r\n\t\t\t\t{ id: id }, { withCredentials: true })\r\n\t\t\tconst response = await axios.post(process.env.REACT_APP_API_URL+\"/messageGet\",\r\n\t\t\t\t{ conversationId: id }, { withCredentials: true })\r\n\t\t\tsetMessageData(response.data)\r\n\t\t}\r\n\t\tconst delivered = async (id) => {\r\n\t\t\tawait axios.post(process.env.REACT_APP_API_URL+\"/delivered\",\r\n\t\t\t\t{ id: id }, { withCredentials: true })\r\n\t\t\tconst response = await axios.post(process.env.REACT_APP_API_URL+\"/messageGet\",\r\n\t\t\t\t{ conversationId: id }, { withCredentials: true })\r\n\t\t\tsetMessageData(response.data)\r\n\t\t}\r\n\r\n\t\tsocket.current = io(process.env.REACT_APP_SOCKET_URL)\r\n\t\tsocket.current.on(\"getMessage\", (data) => {\r\n\t\t\tsetArrivalMessage({\r\n\t\t\t\tfriend: data.friend,\r\n\t\t\t\tconversationId: data.conversationId,\r\n\t\t\t\tsenderEmail: data.senderEmail,\r\n\t\t\t\tmessage: data.text,\r\n\t\t\t\tcreatedAt: Date.now()\r\n\t\t\t})\r\n\t\t})\r\n\t\tsocket.current.on(\"getMessageSeen\", ({ conversationId }) => {\r\n\t\t\tconsole.log(\"id received\", conversationId)\r\n\t\t\tseen(conversationId)\r\n\t\t})\r\n\t\tsocket.current.on(\"getMessageDelivered\", ({ conversationId }) => {\r\n\t\t\tdelivered(conversationId)\r\n\t\t})\r\n\t}, []) //to run single time only\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getConversations = async () => {\r\n\t\t\tconst response = await axios.get(process.env.REACT_APP_API_URL+\"/allConversations\", { withCredentials: true })\r\n\t\t\tsetConversations(response.data)\r\n\t\t}\r\n\t\tif (arrivalMessage?.friend) {\r\n\t\t\tgetConversations()\r\n\t\t} else {\r\n\t\t\tconsole.log(arrivalMessage)\r\n\t\t\tif (arrivalMessage) {\r\n\t\t\t\tif (messageConversation?._id === arrivalMessage.conversationId) {\r\n\t\t\t\t\tsocket.current.emit(\"messageSeen\", {\r\n\t\t\t\t\t\tconversationId: arrivalMessage.conversationId,\r\n\t\t\t\t\t\tsenderEmail: arrivalMessage.senderEmail\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetMessageData(prev => [...prev, arrivalMessage])\r\n\t\t\t\t\tif (messageConversation.newMessage) {\r\n\t\t\t\t\t\tgetConversations()\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgetConversations()\r\n\t\t\t\t\tsocket.current.emit(\"messageDelivered\", {\r\n\t\t\t\t\t\tconversationId: arrivalMessage.conversationId,\r\n\t\t\t\t\t\tsenderEmail: arrivalMessage.senderEmail\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [arrivalMessage, messageConversation])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (state.email) {\r\n\t\t\tsocket.current.emit(\"addUser\", state.email)\r\n\t\t\tsocket.current.on(\"getUsers\", users => {\r\n\t\t\t\t// console.log(users)\r\n\t\t\t\tsetActiveUsers(users)\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (sessionStorage.getItem(\"messageFriend\") || false) {\r\n\t\t\tsetMessageFriend(JSON.parse(sessionStorage.getItem(\"messageFriend\")))\r\n\t\t} else if (sessionStorage.getItem(\"messageConversation\") || false) {\r\n\t\t\tsetMessageConversation(JSON.parse(sessionStorage.getItem(\"messageConversation\")))\r\n\t\t}\r\n\t}, [state])\r\n\r\n\tuseEffect(() => {\r\n\t\tsocket.current.on(\"welcome\", message => {\r\n\t\t\tconsole.log(message)\r\n\t\t})\r\n\t}, [socket])\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true;\r\n\t\tconst getUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.get(process.env.REACT_APP_API_URL+\"/allConversations\", { withCredentials: true })\r\n\t\t\t\tconsole.log(\"from useEffect\", response)\r\n\t\t\t\tif (isMounted) setConversations(response.data)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tif (err.response?.status === 403) {\r\n\t\t\t\t\tconsole.log(\"receive 403 from token user\");\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait axios.get(process.env.REACT_APP_API_URL+\"/refreshToken\", { withCredentials: true })\r\n\t\t\t\t\t\tconst res = await axios.get(process.env.REACT_APP_API_URL+\"/allConversations\", { withCredentials: true })\r\n\t\t\t\t\t\tif (isMounted) setConversations(res.data)\r\n\t\t\t\t\t\tconsole.log(\"login with RT user\");\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tAuth.signOut()\r\n\t\t\t\t\t\t// window.location.replace(\"/logout\")\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tAuth.signOut()\r\n\t\t\t\t\t// window.location.replace(\"/logout\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (search.searchedItem === null) {\r\n\t\t\tgetUser()\r\n\t\t\tsetMessageFriend(false)\r\n\t\t}\r\n\t\treturn () => { isMounted = false }\r\n\t}, [state, search])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst sendSeen = async (c) => {\r\n\t\t\tawait axios.post(process.env.REACT_APP_API_URL+\"/seen\",\r\n\t\t\t\t{ id: c._id }, { withCredentials: true })\r\n\t\t}\r\n\t\tconst sendDelivered = async (c) => {\r\n\t\t\tawait axios.post(process.env.REACT_APP_API_URL+\"/delivered\",\r\n\t\t\t\t{ conversation: c._id }, { withCredentials: true })\r\n\t\t}\r\n\t\tconversations.forEach(i => {\r\n\t\t\tif (i.newMessage === true) {\r\n\t\t\t\tconsole.log(\"my id\", messageConversation?._id)\r\n\t\t\t\tconsole.log(\"c id\", i._id)\r\n\t\t\t\tif (i.senderEmail !== state.email) {\r\n\t\t\t\t\tif (i._id === messageConversation?._id) {\r\n\t\t\t\t\t\tsendSeen(i)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsendDelivered(i)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}, [conversations, messageConversation, state])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getConversation = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post(process.env.REACT_APP_API_URL+\"/messageGet\",\r\n\t\t\t\t\t{ conversationId: messageConversation._id }, { withCredentials: true })\r\n\t\t\t\tsetMessageData(response.data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (messageConversation) {\r\n\t\t\tgetConversation()\r\n\t\t} else {\r\n\t\t\tsetMessageData([])\r\n\t\t}\r\n\t}, [messageConversation])\r\n\r\n\tconst MessageConversation = (c) => {\r\n\t\tsessionStorage.setItem(\"messageConversation\", JSON.stringify(c));\r\n\t\tsessionStorage.removeItem(\"messageFriend\")\r\n\t\tsetMessageFriend(false)\r\n\t\tsetMessageConversation(c)\r\n\t}\r\n\r\n\tconst MessageFriend = async (friend) => {\r\n\t\ttry {\r\n\t\t\tconst response = await axiosInstance.post(\"conversationId\",\r\n\t\t\t\t{ friendId: friend._id }, { withCredentials: true })\r\n\t\t\tif (response.data === \"\") {\r\n\t\t\t\tsessionStorage.setItem(\"messageFriend\", JSON.stringify(friend));\r\n\t\t\t\tsessionStorage.removeItem(\"messageConversation\")\r\n\t\t\t\tsetMessageConversation(false)\r\n\t\t\t\tsetMessageFriend(friend)\r\n\t\t\t} else {\r\n\t\t\t\tsessionStorage.setItem(\"messageConversation\", JSON.stringify(response.data));\r\n\t\t\t\tsessionStorage.removeItem(\"messageFriend\")\r\n\t\t\t\tsetMessageFriend(false)\r\n\t\t\t\tsetMessageConversation(response.data)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.log(conversations)\r\n\r\n\tif (Auth.getAuth()) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"split left\">\r\n\t\t\t\t\t<Modal.Dialog>\r\n\r\n\t\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t\t{search.searchedItem === null && <Modal.Header >\r\n\t\t\t\t\t\t\t\t<Modal.Title>Recent</Modal.Title>\r\n\t\t\t\t\t\t\t</Modal.Header>}\r\n\r\n\t\t\t\t\t\t\t{search.searchedItem === null ?\r\n\t\t\t\t\t\t\t\t(conversations.map((item, i) => {\r\n\t\t\t\t\t\t\t\t\tif (item.email === state.email) {\r\n\t\t\t\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn <Conversation conversation={item} index={i} setMessageByConversation={MessageConversation} clicked={messageConversation} active={activeUsers} />\r\n\t\t\t\t\t\t\t\t})) : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Modal.Header >\r\n\t\t\t\t\t\t\t\t\t\t\t<Modal.Title>Recent</Modal.Title>\r\n\t\t\t\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t\t\t\t{search.searchedItem.conversations.map((searchItem, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<Conversation conversation={searchItem} index={i} setMessageByConversation={MessageConversation} clicked={messageConversation} active={activeUsers} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t<Modal.Header >\r\n\t\t\t\t\t\t\t\t\t\t\t<Modal.Title>Friends</Modal.Title>\r\n\t\t\t\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t\t\t\t{search.searchedItem.friends.map((searchItem, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<Friends data={searchItem} index={i} setMessageByFriend={MessageFriend} clicked={messageFriend} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t<Modal.Header >\r\n\t\t\t\t\t\t\t\t\t\t\t<Modal.Title>Others</Modal.Title>\r\n\t\t\t\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t\t\t\t{search.searchedItem.others.map((searchItem, i) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (searchItem.email === state.email) return null\r\n\t\t\t\t\t\t\t\t\t\t\treturn <Others data={searchItem} index={i} />\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t</Modal.Dialog>\r\n\t\t\t\t</div >\r\n\r\n\t\t\t\t<div className=\"split right\">\r\n\t\t\t\t\t<Modal.Dialog>\r\n\t\t\t\t\t\t<Modal.Header >\r\n\t\t\t\t\t\t\t<Modal.Title>Messages</Modal.Title>\r\n\t\t\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tmessageData.map((m, i) => (\r\n\t\t\t\t\t\t\t\t\t< Messages message={m} index={i} conversation={messageConversation} />\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t\t\t<Modal.Footer >\r\n\t\t\t\t\t\t\t{(messageFriend || messageConversation) ?\r\n\t\t\t\t\t\t\t\t<form className=\"d-flex\" onSubmit={sendMessage} ref={(el) => { setScroll(el) }}>\r\n\t\t\t\t\t\t\t\t\t<input style={{ height: \"60px\", width: \"300px\" }} className=\"form-control me-4 mt-2\" value={inputData}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"search\" placeholder=\"Search\" aria-label=\"Search\" onChange={changeInput} />\r\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-outline-success\" type=\"submit\">Search</button>\r\n\t\t\t\t\t\t\t\t</form> : <></>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{/* <InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Recipient's username\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Recipient's username\"\r\n\t\t\t\t\t\t\t\t\taria-describedby=\"basic-addon2\"\r\n\t\t\t\t\t\t\t\t\tvalue={inputData}\r\n\t\t\t\t\t\t\t\t\tonChange={changeInput}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Button size=\"lg\" onSubmit={sendMessage} variant=\"success\" id=\"button-addon2\">\r\n\t\t\t\t\t\t\t\t\tButton\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</InputGroup> */}\r\n\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t</Modal.Dialog>\r\n\t\t\t\t</div>\r\n\t\t\t</div >\r\n\t\t)\r\n\t} else if (Auth.getAuth() === false) {\r\n\t\t<p>\r\n\t\t\tYou need To login First\r\n\t\t</p>\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{state.email === null && <h1>Loading</h1>}\r\n\t\t\t{state.email === false && <h1>First you have to Login/Register</h1>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Chatting\r\n","import { useContext } from \"react\"\r\nimport { Context } from '../context';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Auth from '../isAuth';\r\n\r\nconst Logout = async () => {\r\n\r\n    const { dispatch } = useContext(Context)\r\n    const history = useHistory()\r\n    try {\r\n        const response = await axios.get('http://localhost:5000/logout', {\r\n            withCredentials: true\r\n        })\r\n        console.log(\"response\", response)\r\n        await dispatch({\r\n            type: \"LOGOUT\",\r\n        })\r\n        await Auth.signOut()\r\n        await sessionStorage.removeItem(\"user\")\r\n        await sessionStorage.removeItem(\"messageConversation\")\r\n        await sessionStorage.removeItem(\"messageFriend\")\r\n        window.location.replace(\"/login\")\r\n        // history.push(\"/login\")\r\n    } catch (err) {\r\n        console.log(\"error\", err)\r\n    }\r\n    return null\r\n\r\n}\r\n\r\nexport default Logout","import React from \"react\"\r\n\r\n\r\nconst Dashboard = () =>{\r\n\r\n    return (\r\n      <div>\r\n        you type some wrong link in the url bar 404 NOT FOUND\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Dashboard","import { BrowserRouter, Route, Switch } from 'react-router-dom'\nimport Home from './components/Home'\nimport Register from './components/Register'\nimport Navigator from \"./components/Navigator\"\nimport Login from \"./components/Login\"\nimport Chatting from \"./components/Chatting\"\nimport Logout from \"./components/Logout\";\nimport Error from \"./components/Error\"\n\nimport './App.css'\nimport { Provider } from './context';\nimport { SearchProvider } from './context/searchItem';\n\n\nconst App = () => {\n\n\n  return (\n    <SearchProvider>\n      <Provider>\n        <BrowserRouter>\n          <Navigator />\n          <Switch> {/* by switch we can handle err page */}\n            <Route exact path='/'><Home /></Route>\n            <Route exact path='/register'><Register /></Route>\n            <Route exact path='/login'><Login /></Route>\n            <Route exact path='/chatting'><Chatting /></Route>\n            <Route exact path='/logout'><Logout /></Route>\n            <Route><Error /></Route> {/* Error Page */}\n          </Switch>\n        </BrowserRouter>\n      </Provider>\n    </SearchProvider>\n  )\n}\n\nexport default App","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n// process.env.NODE_ENV === 'production' && \nexport function register(config) {\n  if ('serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"bootstrap/dist/css/bootstrap.min.css\"\nimport reportWebVitals from './reportWebVitals';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nserviceWorker.register();\nreportWebVitals();\n"],"sourceRoot":""}